<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    「POJ 1417」True Liars | dinnerhunt
</title>
<link rel="shortcut icon" href="https://dinnerhunt.cn/favicon.ico?v=1654671103475">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://dinnerhunt.cn/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://dinnerhunt.cn/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/stackoverflow-light.min.css">

<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


        
</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://dinnerhunt.cn">
                <img class="avatar" src="https://dinnerhunt.cn/images/avatar.png?v=1654671103475" alt="">
            </a>
            <div class="site-title">
                <h1>
                    dinnerhunt
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    首页
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    归档
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    标签
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    关于
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/friend" class="menu">
                                    友链
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-detail main-container">
                <!-- left -->
                <div id="content" class="main-container-left">
                    <article class="post i-card">
                        <h2 class="post-title">
                            「POJ 1417」True Liars
                        </h2>
                        <div class="post-info">
                            <time class="post-time">2019-05-05</time>
                            
                                <a href="https://dinnerhunt.cn/tag/Pp9Co1kPV/" class="post-tag i-tag
                            i-tag-other_3">
                            #并查集
                        </a>
                                
                                <a href="https://dinnerhunt.cn/tag/clzno4f-C/" class="post-tag i-tag
                            i-tag-warning">
                            #普通DP
                        </a>
                                
                        </div>
                        
                                <div class="post-content">
                                    <p>After having drifted about in a small boat for a couple of days, Akira Crusoe Maeda was finally cast ashore on a foggy island. Though he was exhausted and despaired, he was still fortunate to remember a legend of the foggy island, which he had heard from patriarchs in his childhood. This must be the island in the legend. In the legend, two tribes have inhabited the island, one is divine and the other is devilish, once members of the divine tribe bless you, your future is bright and promising, and your soul will eventually go to Heaven, in contrast, once members of the devilish tribe curse you, your future is bleak and hopeless, and your soul will eventually fall down to Hell.</p>
<!-- more -->
<p>In order to prevent the worst-case scenario, Akira should distinguish the devilish from the divine. But how? They looked exactly alike and he could not distinguish one from the other solely by their appearances. He still had his last hope, however. The members of the divine tribe are truth-tellers, that is, they always tell the truth and those of the devilish tribe are liars, that is, they always tell a lie.</p>
<p>He asked some of them whether or not some are divine. They knew one another very much and always responded to him &quot;faithfully&quot; according to their individual natures (i.e., they always tell the truth or always a lie). He did not dare to ask any other forms of questions, since the legend says that a devilish member would curse a person forever when he did not like the question. He had another piece of useful informationf the legend tells the populations of both tribes. These numbers in the legend are trustworthy since everyone living on this island is immortal and none have ever been born at least these millennia.</p>
<p>You are a good computer programmer and so requested to help Akira by writing a program that classifies the inhabitants according to their answers to his inquiries.</p>
<h4 id="链接">链接🔗</h4>
<p><a href="https://vjudge.net/problem/12603/origin">「POJ 1417」True Liars </a></p>
<h4 id="题解">题解</h4>
<p><strong>带权并查集 + DP + 记录路径</strong><br>
先用带权并查集维护集合内对立人数(每个集合中不能属于同一组中两队的人数)<br>
然后DP求解选取 m 人的方案数是否为 1 ,在用一个数组记录每次选取的路径</p>
<h4 id="代码">代码</h4>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#define MAXN 600
using namespace std;

int pre[MAXN], rank[MAXN], gg[MAXN], jj[MAXN][MAXN], tag[MAXN][2], dp[MAXN][MAXN], cc[MAXN][2];
int tot;
int find(int x)
{
    if(x!=pre[x])
    {
        int px=find(pre[x]);
        rank[x]^=rank[pre[x]];
        pre[x]=px;
    }
    return pre[x];
}

void jion(int x, int y, int d)
{
    int px=find(x);
    int py=find(y);
    if(px!=py)
    {
        pre[py]=px;
        rank[py]=rank[x]^rank[y]^d;
    }
}
void init()
{
	memset(gg, 0, sizeof(gg)); 
    memset(jj, 0, sizeof(jj));
    memset(tag, 0, sizeof(tag));
    memset(dp, 0, sizeof(dp));
    memset(cc, 0, sizeof(cc));
    tot=0;
    for(int i=1; i&lt;=p+q; i++)
    {
        rank[i]=0;
        pre[i]=i;
    }
}

int main()
{
	freopen(&quot;a.in&quot;,&quot;r&quot;,stdin);
	freopen(&quot;k.out&quot;,&quot;w&quot;,stdout);
    int m, p, q;
    while(scanf(&quot;%d%d%d&quot;, &amp;m, &amp;p, &amp;q))
    {
        if(m+p+q==0) break;
        init();
        while(m--)
        {
            int x, y, d=1;
            char ch[5];
            scanf(&quot;%d%d%s&quot;, &amp;x, &amp;y, ch);
            if(ch[0]=='y') d=0;
            jion(x, y, d);
        }
        //**统计集合个数并且编号
        for(int i=1; i&lt;=p+q; i++)  if(find(i)==i) gg[i]=++tot;
        //**分别统计每个集合两种类的数目并存储到tag中
        for(int i=1; i&lt;=p+q; i++)  tag[gg[find(i)]][rank[i]]++; 

        dp[0][0]=1;
        for(int i=1; i&lt;=tot; i++)
        {
            for(int j=0; j&lt;=p+q; j++) //**dp[i][j]存储到第i个集合选择种类和为j的方法数
            {  
                if(j-tag[i][0]&gt;=0&amp;&amp;dp[i-1][j-tag[i][0]])
                {
                    dp[i][j]+=dp[i-1][j-tag[i][0]];
                    jj[i][j]=tag[i][0];   //**jj数组记录路径，即选的是1还是0
                }
                if(j-tag[i][1]&gt;=0&amp;&amp;dp[i-1][j-tag[i][1]])
                {
                    dp[i][j]+=dp[i-1][j-tag[i][1]];
                    jj[i][j]=tag[i][1];
                }
            }
        }
        if(dp[tot][p]!=1) printf(&quot;no\n&quot;);
        else
        {
            for(int i=tot,j=p; j&gt;0&amp;&amp;i&gt;0; i--)//**标记路径
            { 
                if(jj[i][j]==tag[i][0]) cc[i][0]=1;
                else cc[i][1]=1;
                j-=jj[i][j];
            }
            for(int i=1; i&lt;=p+q; i++)
                if(cc[gg[find(i)]][rank[i]])
                    printf(&quot;%d\n&quot;, i);
            printf(&quot;end\n&quot;);
        }
    }
    return 0;
}
</code></pre>

                                </div>
                    </article>
                    <!--  -->
                    
                            <div id="disqus_thread"></div>
                            <div id="gitalk-container"></div>
                </div>
                <!-- middle -->
                <div class="main-container-middle"></div>
                <!-- right -->
                <div id="sidebar" class="main-container-right">
                    
                        <!-- toc -->
                        
    <div class="toc-card i-card ">
        <div class="toc-title i-card-title">目录</div>
        <div class="toc-content">
            <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#%E9%93%BE%E6%8E%A5">链接🔗</a></li>
<li><a href="#%E9%A2%98%E8%A7%A3">题解</a></li>
<li><a href="#%E4%BB%A3%E7%A0%81">代码</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
        <script>
            function locateCatelogList() {
                /*获取文章目录集合,可通过:header过滤器*/
                var alis = $('.post-content :header');
                /*获取侧边栏目录列表集合**/
                var sidebar_alis = $('.markdownIt-TOC a');
                /*获取滚动条到顶部的距离*/
                var scroll_height = $(window).scrollTop();
                for (var i = 0; i < alis.length; i++) {
                    /*获取锚点集合中的元素分别到顶点的距离*/
                    var a_height = $(alis[i]).offset().top;
                    if (a_height < scroll_height) {
                        /*高亮显示*/
                        sidebar_alis.removeClass('on');
                        $(sidebar_alis[i]).addClass('on');
                    }
                }
            }
            $(function() {
                /*绑定滚动事件 */
                $(window).bind('scroll', locateCatelogList);
            });
        </script>
    </div>
    
                            

                </div>




            </div>


            <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.css" integrity="sha384-b/NoaeRXkMxyKcrDw2KtVtYKkVg3dA0rTRgLoV7W2df3MzeR1eHLTi+l4//4fMwk" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.js" integrity="sha384-ern5NCRqs6nJ/a4Ik0nB9hnKVH5HwV2XRUYdQl09OB/vvd1Lmmqbg1Mh+mYUclXx" crossorigin="anonymous"></script> | 
  <a class="rss" href="https://dinnerhunt.cn/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>


    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
    
</body>

</html>