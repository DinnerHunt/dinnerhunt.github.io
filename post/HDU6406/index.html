<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    ã€ŒHDU 6406ã€ Character Encoding &amp; ã€ŒP4198ã€æ¥¼æˆ¿é‡å»º | dinnerhunt
</title>
<link rel="shortcut icon" href="https://dinnerhunt.cn/favicon.ico?v=1654671103475">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://dinnerhunt.cn/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://dinnerhunt.cn/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/stackoverflow-light.min.css">

<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


        
</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://dinnerhunt.cn">
                <img class="avatar" src="https://dinnerhunt.cn/images/avatar.png?v=1654671103475" alt="">
            </a>
            <div class="site-title">
                <h1>
                    dinnerhunt
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    é¦–é¡µ
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    å½’æ¡£
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    æ ‡ç­¾
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    å…³äº
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/friend" class="menu">
                                    å‹é“¾
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-detail main-container">
                <!-- left -->
                <div id="content" class="main-container-left">
                    <article class="post i-card">
                        <h2 class="post-title">
                            ã€ŒHDU 6406ã€ Character Encoding &amp; ã€ŒP4198ã€æ¥¼æˆ¿é‡å»º
                        </h2>
                        <div class="post-info">
                            <time class="post-time">2020-03-15</time>
                            
                                <a href="https://dinnerhunt.cn/tag/FlI-dwm0d/" class="post-tag i-tag
                            i-tag-info">
                            #çº¿æ®µæ ‘
                        </a>
                                
                        </div>
                        
                                <div class="post-content">
                                    <p>There is an apple tree in front of Taotao's house. When autumn comes, n apples on the tree ripen, and Taotao will go to pick these apples.</p>
<p>When Taotao picks apples, Taotao scans these apples from the first one to the last one. If the current apple is the first apple, or it is strictly higher than the previously picked one, then Taotao will pick this apple; otherwise, he will not pick.</p>
<!--more-->
<p>Given the heights of these apples h1,h2,â‹¯,hn, you are required to answer some independent queries. Each query is two integers p,q, which asks the number of apples Taotao would pick, if the height of the p-th apple were q (instead of hp). Can you answer all these queries?</p>
<hr>
<p>å° A çš„æ¥¼æˆ¿å¤–æœ‰ä¸€å¤§ç‰‡æ–½å·¥å·¥åœ°ï¼Œå·¥åœ°ä¸Šæœ‰ NN æ ‹å¾…å»ºçš„æ¥¼æˆ¿ã€‚æ¯å¤©ï¼Œè¿™ç‰‡å·¥åœ°ä¸Šçš„æˆ¿å­æ‹†äº†åˆå»ºã€å»ºäº†åˆæ‹†ã€‚ä»–ç»å¸¸æ— èŠåœ°çœ‹ç€çª—å¤–å‘å‘†ï¼Œæ•°è‡ªå·±èƒ½å¤Ÿçœ‹åˆ°å¤šå°‘æ ‹æˆ¿å­ã€‚</p>
<p>ä¸ºäº†ç®€åŒ–é—®é¢˜ï¼Œæˆ‘ä»¬è€ƒè™‘è¿™äº›äº‹ä»¶å‘ç”Ÿåœ¨ä¸€ä¸ªäºŒç»´å¹³é¢ä¸Šã€‚å° A åœ¨å¹³é¢ä¸Š (0,0) ç‚¹çš„ä½ç½®ï¼Œç¬¬ i æ ‹æ¥¼æˆ¿å¯ä»¥ç”¨ä¸€æ¡è¿æ¥ (i,0) å’Œ (i,H_i) çš„çº¿æ®µè¡¨ç¤ºï¼Œå…¶ä¸­ H_iä¸ºç¬¬ i æ ‹æ¥¼æˆ¿çš„é«˜åº¦ã€‚å¦‚æœè¿™æ ‹æ¥¼æˆ¿ä¸Šä»»ä½•ä¸€ä¸ªé«˜åº¦å¤§äº 0 çš„ç‚¹ä¸ (0,0)çš„è¿çº¿æ²¡æœ‰ä¸ä¹‹å‰çš„çº¿æ®µç›¸äº¤ï¼Œé‚£ä¹ˆè¿™æ ‹æ¥¼æˆ¿å°±è¢«è®¤ä¸ºæ˜¯å¯è§çš„ã€‚</p>
<p>æ–½å·¥é˜Ÿçš„å»ºé€ æ€»å…±è¿›è¡Œäº† M å¤©ã€‚åˆå§‹æ—¶ï¼Œæ‰€æœ‰æ¥¼æˆ¿éƒ½è¿˜æ²¡æœ‰å¼€å§‹å»ºé€ ï¼Œå®ƒä»¬çš„é«˜åº¦å‡ä¸º 0ã€‚åœ¨ç¬¬ i å¤©ï¼Œå»ºç­‘é˜Ÿå°†ä¼šå°†æ¨ªåæ ‡ä¸º X_i çš„æˆ¿å±‹çš„é«˜åº¦å˜ä¸º Y_iï¼ˆé«˜åº¦å¯ä»¥æ¯”åŸæ¥å¤§â€”ä¿®å»ºï¼Œä¹Ÿå¯ä»¥æ¯”åŸæ¥å°â€”æ‹†é™¤ï¼Œç”šè‡³å¯ä»¥ä¿æŒä¸å˜â€”å»ºç­‘é˜Ÿè¿™å¤©ä»€ä¹ˆäº‹ä¹Ÿæ²¡åšï¼‰ã€‚è¯·ä½ å¸®å° A æ•°æ•°æ¯å¤©åœ¨å»ºç­‘é˜Ÿå®Œå·¥ä¹‹åï¼Œä»–èƒ½çœ‹åˆ°å¤šå°‘æ ‹æ¥¼æˆ¿ï¼Ÿ</p>
<h4 id="å¤§è‡´é¢˜æ„">å¤§è‡´é¢˜æ„ ğŸ“–</h4>
<p>ä¸¤é¢˜è½¬åŒ–ä¸€ä¸‹åï¼Œéƒ½å¤§è‡´å¦‚æ­¤ï¼Œå¯¹åºåˆ—ä¸ŠæŸä¸€å€¼è¿›è¡Œä¿®æ”¹ï¼Œç„¶åæ±‚è¯¥åºåˆ—ä»å·¦åˆ°å³ï¼Œæœ€å¤§å€¼çš„æ›´æ–°æ¬¡æ•°</p>
<h4 id="é“¾æ¥">é“¾æ¥ ğŸ”—</h4>
<p><a href="https://www.luogu.com.cn/problem/P4198">ã€ŒP4198ã€æ¥¼æˆ¿é‡å»º</a></p>
<h4 id="é¢˜è§£">é¢˜è§£  â“</h4>
<p>HDU 6406 æœ‰å•<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi></mrow><annotation encoding="application/x-tex">log</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span></span></span></span>åšæ³•ï¼Œè¿™é‡Œæˆ‘ä¸¤é¢˜éƒ½ç”¨çš„åŒ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi></mrow><annotation encoding="application/x-tex">log</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span></span></span></span>åšæ³•<br>
çº¿æ®µæ ‘ç»´æŠ¤ä¸¤ä¸ªå€¼ï¼ŒåŒºé—´æœ€å¤§å€¼å’ŒåŒºé—´æœ€å¤§å€¼æ›´æ–°æ¬¡æ•°(ä¹Ÿå°±æ˜¯é¢˜ç›®æ‰€æ±‚)<br>
æœ€å¤§å€¼ç›´æ¥ç»´æŠ¤å°±å¥½ï¼Œæ›´æ–°æ¬¡æ•°ä¸»è¦åœ¨åˆå¹¶çš„æ—¶å€™æ³¨æ„ä¸‹</p>
<p>å¦‚æœå·¦åŒºé—´æœ€å¤§å€¼ <em>å¤§äº</em> å³åŒºé—´çš„å·¦åŒºé—´çš„æœ€å¤§å€¼ï¼Œåˆ™è¯´æ˜å³åŒºé—´çš„å·¦åŒºé—´ä¸ä¼šæœ‰ä»»ä½•è´¡çŒ®ï¼Œç„¶åé€’å½’å³åŒºé—´æŸ¥æ‰¾</p>
<p>å¦‚æœå·¦åŒºé—´æœ€å¤§å€¼ <em>å°äº</em> å³åŒºé—´çš„å·¦åŒºé—´çš„æœ€å¤§å€¼ï¼Œåˆ™è¯´æ˜å³åŒºé—´çš„å³åŒºé—´ä¸€å®šæ˜¯æ»¡è´¡çŒ®ï¼Œç„¶åé€’å½’å·¦åŒºé—´æŸ¥æ‰¾</p>
<h4 id="ä»£ç ">ä»£ç </h4>
<pre><code class="language-cpp">const ll N = 2e5+10;
const ll mod = 998244353;
ll t[N&lt;&lt;4],v[N&lt;&lt;4];
ll query(ll p,ll l,ll r,ll s)
{
    if(v[p] &lt;= s)return 0;
    if(l == r) return v[p] &gt; s;
    if(v[ls] &lt;= s) return query(rs,mid+1,r,s);
    return query(ls,l,mid,s) + t[p] - t[ls];
}
void update(ll p,ll l ,ll r,ll pos,ll s)
{
    if( l == r)
    {
        t[p] = 1,v[p] =s;
        return;
    }
    if(pos &lt;=  mid) update(ls,l,mid,pos,s);
    else update(rs,mid+1,r,pos,s);
    v[p] = max(v[ls],v[rs]);
    t[p] = t[ls] + query(rs,mid+1,r,v[ls]);
}
ll a[N];
int main()
{
//    __IN;__OUT
    ll T;RLL(T);
    while(T--)
    {
        ll n,m;RLL2(n,m);
        FOR(i,1,n)
        {
            RLL(a[i]);
            update(1, 1, n,i,a[i]);
        }
        FOR(i,1,m)
        {
            ll x,y;RLL2(x,y);
            update(1, 1, n,x,y);
            PLN(t[1]);
            update(1, 1, n,x,a[x]);
        }
        FOR(i,1,n) update(1,1,n,i,0);
    }

    return 0;
}
</code></pre>

                                </div>
                    </article>
                    <!--  -->
                    
                            <div id="disqus_thread"></div>
                            <div id="gitalk-container"></div>
                </div>
                <!-- middle -->
                <div class="main-container-middle"></div>
                <!-- right -->
                <div id="sidebar" class="main-container-right">
                    
                        <!-- toc -->
                        
    <div class="toc-card i-card ">
        <div class="toc-title i-card-title">ç›®å½•</div>
        <div class="toc-content">
            <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#%E5%A4%A7%E8%87%B4%E9%A2%98%E6%84%8F">å¤§è‡´é¢˜æ„ ğŸ“–</a></li>
<li><a href="#%E9%93%BE%E6%8E%A5">é“¾æ¥ ğŸ”—</a></li>
<li><a href="#%E9%A2%98%E8%A7%A3">é¢˜è§£  â“</a></li>
<li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
        <script>
            function locateCatelogList() {
                /*è·å–æ–‡ç« ç›®å½•é›†åˆ,å¯é€šè¿‡:headerè¿‡æ»¤å™¨*/
                var alis = $('.post-content :header');
                /*è·å–ä¾§è¾¹æ ç›®å½•åˆ—è¡¨é›†åˆ**/
                var sidebar_alis = $('.markdownIt-TOC a');
                /*è·å–æ»šåŠ¨æ¡åˆ°é¡¶éƒ¨çš„è·ç¦»*/
                var scroll_height = $(window).scrollTop();
                for (var i = 0; i < alis.length; i++) {
                    /*è·å–é”šç‚¹é›†åˆä¸­çš„å…ƒç´ åˆ†åˆ«åˆ°é¡¶ç‚¹çš„è·ç¦»*/
                    var a_height = $(alis[i]).offset().top;
                    if (a_height < scroll_height) {
                        /*é«˜äº®æ˜¾ç¤º*/
                        sidebar_alis.removeClass('on');
                        $(sidebar_alis[i]).addClass('on');
                    }
                }
            }
            $(function() {
                /*ç»‘å®šæ»šåŠ¨äº‹ä»¶ */
                $(window).bind('scroll', locateCatelogList);
            });
        </script>
    </div>
    
                            

                </div>




            </div>


            <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.css" integrity="sha384-b/NoaeRXkMxyKcrDw2KtVtYKkVg3dA0rTRgLoV7W2df3MzeR1eHLTi+l4//4fMwk" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.js" integrity="sha384-ern5NCRqs6nJ/a4Ik0nB9hnKVH5HwV2XRUYdQl09OB/vvd1Lmmqbg1Mh+mYUclXx" crossorigin="anonymous"></script> | 
  <a class="rss" href="https://dinnerhunt.cn/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>


    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
    
</body>

</html>