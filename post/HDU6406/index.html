<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    「HDU 6406」 Character Encoding &amp; 「P4198」楼房重建 | dinnerhunt
</title>
<link rel="shortcut icon" href="https://dinnerhunt.cn/favicon.ico?v=1654671103475">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://dinnerhunt.cn/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://dinnerhunt.cn/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/stackoverflow-light.min.css">

<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


        
</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://dinnerhunt.cn">
                <img class="avatar" src="https://dinnerhunt.cn/images/avatar.png?v=1654671103475" alt="">
            </a>
            <div class="site-title">
                <h1>
                    dinnerhunt
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    首页
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    归档
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    标签
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    关于
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/friend" class="menu">
                                    友链
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-detail main-container">
                <!-- left -->
                <div id="content" class="main-container-left">
                    <article class="post i-card">
                        <h2 class="post-title">
                            「HDU 6406」 Character Encoding &amp; 「P4198」楼房重建
                        </h2>
                        <div class="post-info">
                            <time class="post-time">2020-03-15</time>
                            
                                <a href="https://dinnerhunt.cn/tag/FlI-dwm0d/" class="post-tag i-tag
                            i-tag-info">
                            #线段树
                        </a>
                                
                        </div>
                        
                                <div class="post-content">
                                    <p>There is an apple tree in front of Taotao's house. When autumn comes, n apples on the tree ripen, and Taotao will go to pick these apples.</p>
<p>When Taotao picks apples, Taotao scans these apples from the first one to the last one. If the current apple is the first apple, or it is strictly higher than the previously picked one, then Taotao will pick this apple; otherwise, he will not pick.</p>
<!--more-->
<p>Given the heights of these apples h1,h2,⋯,hn, you are required to answer some independent queries. Each query is two integers p,q, which asks the number of apples Taotao would pick, if the height of the p-th apple were q (instead of hp). Can you answer all these queries?</p>
<hr>
<p>小 A 的楼房外有一大片施工工地，工地上有 NN 栋待建的楼房。每天，这片工地上的房子拆了又建、建了又拆。他经常无聊地看着窗外发呆，数自己能够看到多少栋房子。</p>
<p>为了简化问题，我们考虑这些事件发生在一个二维平面上。小 A 在平面上 (0,0) 点的位置，第 i 栋楼房可以用一条连接 (i,0) 和 (i,H_i) 的线段表示，其中 H_i为第 i 栋楼房的高度。如果这栋楼房上任何一个高度大于 0 的点与 (0,0)的连线没有与之前的线段相交，那么这栋楼房就被认为是可见的。</p>
<p>施工队的建造总共进行了 M 天。初始时，所有楼房都还没有开始建造，它们的高度均为 0。在第 i 天，建筑队将会将横坐标为 X_i 的房屋的高度变为 Y_i（高度可以比原来大—修建，也可以比原来小—拆除，甚至可以保持不变—建筑队这天什么事也没做）。请你帮小 A 数数每天在建筑队完工之后，他能看到多少栋楼房？</p>
<h4 id="大致题意">大致题意 📖</h4>
<p>两题转化一下后，都大致如此，对序列上某一值进行修改，然后求该序列从左到右，最大值的更新次数</p>
<h4 id="链接">链接 🔗</h4>
<p><a href="https://www.luogu.com.cn/problem/P4198">「P4198」楼房重建</a></p>
<h4 id="题解">题解  ❓</h4>
<p>HDU 6406 有单<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi></mrow><annotation encoding="application/x-tex">log</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span></span></span></span>做法，这里我两题都用的双<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi></mrow><annotation encoding="application/x-tex">log</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span></span></span></span>做法<br>
线段树维护两个值，区间最大值和区间最大值更新次数(也就是题目所求)<br>
最大值直接维护就好，更新次数主要在合并的时候注意下</p>
<p>如果左区间最大值 <em>大于</em> 右区间的左区间的最大值，则说明右区间的左区间不会有任何贡献，然后递归右区间查找</p>
<p>如果左区间最大值 <em>小于</em> 右区间的左区间的最大值，则说明右区间的右区间一定是满贡献，然后递归左区间查找</p>
<h4 id="代码">代码</h4>
<pre><code class="language-cpp">const ll N = 2e5+10;
const ll mod = 998244353;
ll t[N&lt;&lt;4],v[N&lt;&lt;4];
ll query(ll p,ll l,ll r,ll s)
{
    if(v[p] &lt;= s)return 0;
    if(l == r) return v[p] &gt; s;
    if(v[ls] &lt;= s) return query(rs,mid+1,r,s);
    return query(ls,l,mid,s) + t[p] - t[ls];
}
void update(ll p,ll l ,ll r,ll pos,ll s)
{
    if( l == r)
    {
        t[p] = 1,v[p] =s;
        return;
    }
    if(pos &lt;=  mid) update(ls,l,mid,pos,s);
    else update(rs,mid+1,r,pos,s);
    v[p] = max(v[ls],v[rs]);
    t[p] = t[ls] + query(rs,mid+1,r,v[ls]);
}
ll a[N];
int main()
{
//    __IN;__OUT
    ll T;RLL(T);
    while(T--)
    {
        ll n,m;RLL2(n,m);
        FOR(i,1,n)
        {
            RLL(a[i]);
            update(1, 1, n,i,a[i]);
        }
        FOR(i,1,m)
        {
            ll x,y;RLL2(x,y);
            update(1, 1, n,x,y);
            PLN(t[1]);
            update(1, 1, n,x,a[x]);
        }
        FOR(i,1,n) update(1,1,n,i,0);
    }

    return 0;
}
</code></pre>

                                </div>
                    </article>
                    <!--  -->
                    
                            <div id="disqus_thread"></div>
                            <div id="gitalk-container"></div>
                </div>
                <!-- middle -->
                <div class="main-container-middle"></div>
                <!-- right -->
                <div id="sidebar" class="main-container-right">
                    
                        <!-- toc -->
                        
    <div class="toc-card i-card ">
        <div class="toc-title i-card-title">目录</div>
        <div class="toc-content">
            <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#%E5%A4%A7%E8%87%B4%E9%A2%98%E6%84%8F">大致题意 📖</a></li>
<li><a href="#%E9%93%BE%E6%8E%A5">链接 🔗</a></li>
<li><a href="#%E9%A2%98%E8%A7%A3">题解  ❓</a></li>
<li><a href="#%E4%BB%A3%E7%A0%81">代码</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
        <script>
            function locateCatelogList() {
                /*获取文章目录集合,可通过:header过滤器*/
                var alis = $('.post-content :header');
                /*获取侧边栏目录列表集合**/
                var sidebar_alis = $('.markdownIt-TOC a');
                /*获取滚动条到顶部的距离*/
                var scroll_height = $(window).scrollTop();
                for (var i = 0; i < alis.length; i++) {
                    /*获取锚点集合中的元素分别到顶点的距离*/
                    var a_height = $(alis[i]).offset().top;
                    if (a_height < scroll_height) {
                        /*高亮显示*/
                        sidebar_alis.removeClass('on');
                        $(sidebar_alis[i]).addClass('on');
                    }
                }
            }
            $(function() {
                /*绑定滚动事件 */
                $(window).bind('scroll', locateCatelogList);
            });
        </script>
    </div>
    
                            

                </div>




            </div>


            <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.css" integrity="sha384-b/NoaeRXkMxyKcrDw2KtVtYKkVg3dA0rTRgLoV7W2df3MzeR1eHLTi+l4//4fMwk" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.js" integrity="sha384-ern5NCRqs6nJ/a4Ik0nB9hnKVH5HwV2XRUYdQl09OB/vvd1Lmmqbg1Mh+mYUclXx" crossorigin="anonymous"></script> | 
  <a class="rss" href="https://dinnerhunt.cn/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>


    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
    
</body>

</html>