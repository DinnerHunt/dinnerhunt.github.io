<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    ã€ŒCodeForces 1215Eã€ Marbles | dinnerhunt
</title>
<link rel="shortcut icon" href="https://dinnerhunt.cn/favicon.ico?v=1654671103475">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://dinnerhunt.cn/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://dinnerhunt.cn/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/stackoverflow-light.min.css">

<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


        
</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://dinnerhunt.cn">
                <img class="avatar" src="https://dinnerhunt.cn/images/avatar.png?v=1654671103475" alt="">
            </a>
            <div class="site-title">
                <h1>
                    dinnerhunt
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    é¦–é¡µ
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    å½’æ¡£
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    æ ‡ç­¾
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    å…³äº
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/friend" class="menu">
                                    å‹é“¾
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-detail main-container">
                <!-- left -->
                <div id="content" class="main-container-left">
                    <article class="post i-card">
                        <h2 class="post-title">
                            ã€ŒCodeForces 1215Eã€ Marbles
                        </h2>
                        <div class="post-info">
                            <time class="post-time">2019-12-28</time>
                            
                                <a href="https://dinnerhunt.cn/tag/7CxaZLshz/" class="post-tag i-tag
                            i-tag-success">
                            #çŠ¶å‹DP
                        </a>
                                
                        </div>
                        
                                <div class="post-content">
                                    <p>Monocarp has arranged ğ‘› colored marbles in a row. The color of the ğ‘–-th marble is ğ‘ğ‘–. Monocarp likes ordered things, so he wants to rearrange marbles in such a way that all marbles of the same color form a contiguos segment (and there is only one such segment for each color).</p>
<p>In other words, Monocarp wants to rearrange marbles so that, for every color ğ‘—, if the leftmost marble of color ğ‘— is ğ‘™-th in the row, and the rightmost marble of this color has position ğ‘Ÿ in the row, then every marble from ğ‘™ to ğ‘Ÿ has color ğ‘—.</p>
<p>To achieve his goal, Monocarp can do the following operation any number of times: choose two neighbouring marbles, and swap them.</p>
<p>You have to calculate the minimum number of operations Monocarp has to perform to rearrange the marbles. Note that the order of segments of marbles having equal color does not matter, it is only required that, for every color, all the marbles of this color form exactly one contiguous segment.</p>
<!--more-->
<h4 id="é“¾æ¥">é“¾æ¥ğŸ”—</h4>
<p><a href="https://vjudge.net/problem/1673480/origin">ã€ŒCodeForces 1007Bã€Pave the Parallelepiped</a></p>
<h4 id="é¢˜è§£">é¢˜è§£</h4>
<p>å½“æˆ‘ä»¬ç§»åŠ¨ä¸€ä¸ªæ•°çš„ä½ç½®æ—¶ï¼Œé™¤äº†è¯¥æ•°ä»¥å¤–çš„å…¶ä»–æ•°ç›¸å¯¹ä½ç½®æ˜¯ä¸ä¼šå‘ç”Ÿæ”¹å˜çš„ï¼Œå› æ­¤è½¬ç§»æ—¶ä¸ä¼šäº§ç”Ÿåæ•ˆæ€§<br>
å› æ­¤æˆ‘ä»¬å¯ä»¥è¿›è¡ŒDP<br>
è®¾DP[i] ä¸º iä½ç½®ä¸Šä¸º1çš„å€¼éƒ½å·²ç»åœ¨æœ€å‰é¢ä¸€å—äº†<br>
ç„¶åæå‰å¤„ç†å¥½ num[i][j]æ•°ç»„ï¼Œè¡¨ç¤ºæ‰€æœ‰æ•°å­—iç§»åŠ¨åˆ°æ•°å­—jå‰é¢çš„ä»£ä»·ï¼Œç„¶åè½¬ç§»å°±åˆ¤æ–­é€šè¿‡åˆ¤æ–­è¿™äº›æ•°å­—æ˜¯å¦æ’å¥½åºå³å¯</p>
<h4 id="ä»£ç ">ä»£ç </h4>
<pre><code class="language-cpp">const ll maxd = 4e5+10;
const ll maxn = (1&lt;&lt;20)-1;

ll a[maxd],b[maxd],cnt[27];
ll num[27][27],dp[(1&lt;&lt;20)+10];
int main()
{
//    __IN;__OUT;
    ll n;RLL(n);
    FOR(i,1,n)RLL(a[i]);
    FOR(i,1,n)
    {
        FOR(j, 1, 20)
            num[a[i]][j] += cnt[j];
        cnt[a[i]]++;
    }
    memset(dp,0x3f,sizeof(dp));
    dp[0] = 0;
    FOR(i,1,maxn)
        FOR(j,0,19)
        {
            if(!((i&gt;&gt;j)&amp;1)) continue; //æšä¸¾ç¬¬jä¸ªä½ç½®
            ll t=0;
            FOR(k,0,19)
            {
                if((i&gt;&gt;k)&amp;1) continue;  // ä½ç½®ç¡®å®šäº†ï¼Œè·³è¿‡
                t += num[j+1][k+1];
            }
            dp[i] = min(dp[i],dp[i^(1&lt;&lt;j)]+t);
        }
    PLL(dp[maxn]);
    return 0;
}
</code></pre>

                                </div>
                    </article>
                    <!--  -->
                    
                            <div id="disqus_thread"></div>
                            <div id="gitalk-container"></div>
                </div>
                <!-- middle -->
                <div class="main-container-middle"></div>
                <!-- right -->
                <div id="sidebar" class="main-container-right">
                    
                        <!-- toc -->
                        
    <div class="toc-card i-card ">
        <div class="toc-title i-card-title">ç›®å½•</div>
        <div class="toc-content">
            <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#%E9%93%BE%E6%8E%A5">é“¾æ¥ğŸ”—</a></li>
<li><a href="#%E9%A2%98%E8%A7%A3">é¢˜è§£</a></li>
<li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
        <script>
            function locateCatelogList() {
                /*è·å–æ–‡ç« ç›®å½•é›†åˆ,å¯é€šè¿‡:headerè¿‡æ»¤å™¨*/
                var alis = $('.post-content :header');
                /*è·å–ä¾§è¾¹æ ç›®å½•åˆ—è¡¨é›†åˆ**/
                var sidebar_alis = $('.markdownIt-TOC a');
                /*è·å–æ»šåŠ¨æ¡åˆ°é¡¶éƒ¨çš„è·ç¦»*/
                var scroll_height = $(window).scrollTop();
                for (var i = 0; i < alis.length; i++) {
                    /*è·å–é”šç‚¹é›†åˆä¸­çš„å…ƒç´ åˆ†åˆ«åˆ°é¡¶ç‚¹çš„è·ç¦»*/
                    var a_height = $(alis[i]).offset().top;
                    if (a_height < scroll_height) {
                        /*é«˜äº®æ˜¾ç¤º*/
                        sidebar_alis.removeClass('on');
                        $(sidebar_alis[i]).addClass('on');
                    }
                }
            }
            $(function() {
                /*ç»‘å®šæ»šåŠ¨äº‹ä»¶ */
                $(window).bind('scroll', locateCatelogList);
            });
        </script>
    </div>
    
                            

                </div>




            </div>


            <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.css" integrity="sha384-b/NoaeRXkMxyKcrDw2KtVtYKkVg3dA0rTRgLoV7W2df3MzeR1eHLTi+l4//4fMwk" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.js" integrity="sha384-ern5NCRqs6nJ/a4Ik0nB9hnKVH5HwV2XRUYdQl09OB/vvd1Lmmqbg1Mh+mYUclXx" crossorigin="anonymous"></script> | 
  <a class="rss" href="https://dinnerhunt.cn/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>


    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
    
</body>

</html>