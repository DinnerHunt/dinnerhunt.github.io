<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    ã€ŒCodeForces1278D&amp;Eã€Segment Tree &amp; Tests for problem D | dinnerhunt
</title>
<link rel="shortcut icon" href="https://dinnerhunt.cn/favicon.ico?v=1654671103475">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://dinnerhunt.cn/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://dinnerhunt.cn/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/stackoverflow-light.min.css">

<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


        
</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://dinnerhunt.cn">
                <img class="avatar" src="https://dinnerhunt.cn/images/avatar.png?v=1654671103475" alt="">
            </a>
            <div class="site-title">
                <h1>
                    dinnerhunt
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    é¦–é¡µ
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    å½’æ¡£
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    æ ‡ç­¾
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    å…³äº
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/friend" class="menu">
                                    å‹é“¾
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-detail main-container">
                <!-- left -->
                <div id="content" class="main-container-left">
                    <article class="post i-card">
                        <h2 class="post-title">
                            ã€ŒCodeForces1278D&amp;Eã€Segment Tree &amp; Tests for problem D
                        </h2>
                        <div class="post-info">
                            <time class="post-time">2019-12-23</time>
                            
                                <a href="https://dinnerhunt.cn/tag/FIeqn9R_J/" class="post-tag i-tag
                            i-tag-">
                            #æ•°æ®ç»“æ„
                        </a>
                                
                                <a href="https://dinnerhunt.cn/tag/bx71PebZq/" class="post-tag i-tag
                            i-tag-">
                            #æ„é€ 
                        </a>
                                
                                <a href="https://dinnerhunt.cn/tag/znvACjrMh/" class="post-tag i-tag
                            i-tag-other_4">
                            #å›¾è®º
                        </a>
                                
                        </div>
                        
                                <div class="post-content">
                                    <p>As the name of the task implies, you are asked to do some work with segments and trees.</p>
<p>Recall that a tree is a connected undirected graph such that there is exactly one simple path between every pair of its vertices.</p>
<p>You are given ğ‘› segments [ğ‘™1,ğ‘Ÿ1],[ğ‘™2,ğ‘Ÿ2],â€¦,[ğ‘™ğ‘›,ğ‘Ÿğ‘›], ğ‘™ğ‘–&lt;ğ‘Ÿğ‘– for every ğ‘–. It is guaranteed that all segments' endpoints are integers, and all endpoints are unique â€” there is no pair of segments such that they start in the same point, end in the same point or one starts in the same point the other one ends.</p>
<!--more-->
<p>Let's generate a graph with ğ‘› vertices from these segments. Vertices ğ‘£ and ğ‘¢ are connected by an edge if and only if segments [ğ‘™ğ‘£,ğ‘Ÿğ‘£] and [ğ‘™ğ‘¢,ğ‘Ÿğ‘¢] intersect and neither of it lies fully inside the other one.</p>
<p>For example, pairs ([1,3],[2,4]) and ([5,10],[3,7]) will induce the edges but pairs ([1,2],[3,4]) and ([5,7],[3,10]) will not.</p>
<p>Determine if the resulting graph is a tree or not.</p>
<p>&amp;</p>
<p>We had a really tough time generating tests for problem D. In order to prepare strong tests, we had to solve the following problem.</p>
<p>Given an undirected labeled tree consisting of ğ‘› vertices, find a set of segments such that:</p>
<p>both endpoints of each segment are integers from 1 to 2ğ‘›, and each integer from 1 to 2ğ‘› should appear as an endpoint of exactly one segment;<br>
all segments are non-degenerate;<br>
for each pair (ğ‘–,ğ‘—) such that ğ‘–â‰ ğ‘—, ğ‘–âˆˆ[1,ğ‘›] and ğ‘—âˆˆ[1,ğ‘›], the vertices ğ‘– and ğ‘— are connected with an edge if and only if the segments ğ‘– and ğ‘— intersect, but neither segment ğ‘– is fully contained in segment ğ‘—, nor segment ğ‘— is fully contained in segment ğ‘–.<br>
Can you solve this problem too?</p>
<h4 id="é“¾æ¥">é“¾æ¥ğŸ”—</h4>
<p><a href="https://codeforces.com/contest/1278/problem/D">ã€ŒCodeForces1278Dã€Segment Tree</a><br>
<a href="https://codeforces.com/contest/1278/problem/E">ã€ŒCodeForces1278Eã€Tests for problem D</a></p>
<h4 id="é¢˜è§£">é¢˜è§£</h4>
<p>Dé¢˜ æ„æ€å¤§æ¦‚å°±æ˜¯ï¼Œç»™ä¸€å †çº¿æ®µ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>A</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">A_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>ï¼Œå¦‚æœä¸¤ä¸ªçº¿æ®µ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>A</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>A</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">A_i,A_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.969438em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>ç›¸äº¤ï¼ˆåŒ…å«ä¸ç®—ç›¸äº¤ï¼‰,é‚£ä¹ˆä»£è¡¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">ç‚¹</mi><mi>i</mi><mi mathvariant="normal">ä¸</mi><mi>j</mi></mrow><annotation encoding="application/x-tex">ç‚¹iä¸j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord cjk_fallback">ç‚¹</span><span class="mord mathdefault">i</span><span class="mord cjk_fallback">ä¸</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span></span></span></span> ä¹‹é—´æœ‰è¿è¾¹ï¼Œé—®è¿™äº›çº¿æ®µæ˜¯å¦èƒ½æ„é€ æˆä¸€é¢—æ ‘</p>
<p>Eé¢˜ å°±æ˜¯ç»™æ ‘ï¼Œæ±‚æ„é€ çº¿æ®µ</p>
<p>Dé¢˜</p>
<ol>
<li>å°†æ‹†æˆä¸¤ä¸ªç‚¹ï¼Œä¸¢è¿›æ•°ç»„ï¼Œæ’åº</li>
<li>æšä¸¾ç‚¹</li>
<li>å¦‚æœç‚¹æ˜¯å·¦ç«¯ç‚¹ï¼Œä¸¢è¿›å †</li>
<li>å¦‚æœæ˜¯å³ç«¯ç‚¹ï¼Œåˆ™ä»å¤§åˆ°å°æšä¸¾å †ä¸­ç«¯ç‚¹ï¼Œç›´åˆ°é‡åˆ°è¯¥å³ç«¯ç‚¹æ‰€åœ¨çº¿æ®µçš„å·¦ç«¯ç‚¹ï¼Œé€”ä¸­ç»è¿‡çš„ç‚¹éƒ½ä¸è¯¥çº¿æ®µæœ‰äº¤ç‚¹ï¼Œåˆ é™¤è¯¥è¾¹å·¦ç«¯ç‚¹</li>
<li>è¿”å›ç¬¬äºŒæ­¥</li>
</ol>
<p>ç¬¬4æ­¥ä¸­ï¼Œå½“è¿è¾¹ä¸ºnæ—¶ï¼Œå¼ºè¡Œé€€å‡ºï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n log n)</p>
<p>Eé¢˜ ç±»ä¼¼å…ˆåºéå†çš„å½¢å¼æ„é€ </p>
<h4 id="ä»£ç ">ä»£ç </h4>
<pre><code class="language-cpp">//D
#include &lt;cstdio&gt;
#include &lt;cstring&gt;
#include &lt;set&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
using namespace std;
const int maxd = 5e5+10;
typedef pair&lt;int,int&gt; P;
vector&lt;P&gt; a;
set&lt;P&gt; s;
int fa[maxd],n,flag;
P b[maxd];
int gf(int x)
{
    if(fa[x] == x) return x ;
    return fa[x] = gf(fa[x]);
}
void check()
{
    int num =0;
    for(auto p: a)
    {
 
        //printf(&quot;-- %d %d\n&quot;,p.first,p.second);
        if(p.second&gt;0)s.insert(P(-p.first,p.second)); // æ’å…¥å·¦ç«¯ç‚¹
        else
        {
            int id = -p.second;
            for(auto x:s)
            {
                //printf(&quot;%d %d\n&quot;,x.first,x.second);
                if(b[id].first == -x.first)
                {
                    s.erase(P(x.first,id));
                    break;
                }
                if(gf(id) == gf(x.second)) flag =1;
                //printf(&quot;!! %d %d\n&quot;,id,x.second);
                fa[gf(id)] = gf(x.second);
                num++;
                if(num == n) return;
            }
        }
    }
}
int main()
{
//    freopen(&quot;a.in&quot;,&quot;r&quot;,stdin);
//    freopen(&quot;k.out&quot;,&quot;w&quot;,stdout);
    scanf(&quot;%d&quot;,&amp;n);
    for(int i=1;i&lt;=n;i++)
    {
        fa[i] = i;scanf(&quot;%d %d&quot;,&amp;b[i].first,&amp;b[i].second);
        a.push_back(P(b[i].first,i));
        a.push_back(P(b[i].second,-i));
    }
 
    sort(a.begin(),a.end());
    check();
    for(int i=2;i&lt;=n;i++) if(gf(i) != gf(1)) flag =1;
    if(flag) printf(&quot;NO\n&quot;);
    else printf(&quot;YES\n&quot;);
 
    return 0;

//E
#include &lt;cstdio&gt;
#include &lt;cstring&gt;
#include &lt;set&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;
using namespace std;
const int maxd = 5e5+10;
vector&lt;int&gt; G[maxd];
int n,l[maxd],r[maxd],cnt;
void dfs(int x,int fa)
{
    for(auto v:G[x])
    {
        if(v==fa) continue;
        l[v] = ++cnt;
    }
    r[x] = ++cnt;
    for(int i=G[x].size()-1;i &gt;=0;i--)
    {
        int v = G[x][i];
        if(v == fa) continue;
        dfs(v,x);
    }
}
int main()
{
//    freopen(&quot;a.in&quot;,&quot;r&quot;,stdin);
//    freopen(&quot;k.out&quot;,&quot;w&quot;,stdout);
    int n;scanf(&quot;%d&quot;,&amp;n);
    for(int i=1;i&lt;n;i++)
    {
        int x,y;
        scanf(&quot;%d %d&quot;,&amp;x,&amp;y);
        G[x].push_back(y);
        G[y].push_back(x);
    }
    l[1] = ++cnt;
    dfs(1,1);
    for(int i=1;i&lt;=n;i++) printf(&quot;%d %d\n&quot;,l[i],r[i]);
    return 0;
}
</code></pre>

                                </div>
                    </article>
                    <!--  -->
                    
                            <div id="disqus_thread"></div>
                            <div id="gitalk-container"></div>
                </div>
                <!-- middle -->
                <div class="main-container-middle"></div>
                <!-- right -->
                <div id="sidebar" class="main-container-right">
                    
                        <!-- toc -->
                        
    <div class="toc-card i-card ">
        <div class="toc-title i-card-title">ç›®å½•</div>
        <div class="toc-content">
            <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#%E9%93%BE%E6%8E%A5">é“¾æ¥ğŸ”—</a></li>
<li><a href="#%E9%A2%98%E8%A7%A3">é¢˜è§£</a></li>
<li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
        <script>
            function locateCatelogList() {
                /*è·å–æ–‡ç« ç›®å½•é›†åˆ,å¯é€šè¿‡:headerè¿‡æ»¤å™¨*/
                var alis = $('.post-content :header');
                /*è·å–ä¾§è¾¹æ ç›®å½•åˆ—è¡¨é›†åˆ**/
                var sidebar_alis = $('.markdownIt-TOC a');
                /*è·å–æ»šåŠ¨æ¡åˆ°é¡¶éƒ¨çš„è·ç¦»*/
                var scroll_height = $(window).scrollTop();
                for (var i = 0; i < alis.length; i++) {
                    /*è·å–é”šç‚¹é›†åˆä¸­çš„å…ƒç´ åˆ†åˆ«åˆ°é¡¶ç‚¹çš„è·ç¦»*/
                    var a_height = $(alis[i]).offset().top;
                    if (a_height < scroll_height) {
                        /*é«˜äº®æ˜¾ç¤º*/
                        sidebar_alis.removeClass('on');
                        $(sidebar_alis[i]).addClass('on');
                    }
                }
            }
            $(function() {
                /*ç»‘å®šæ»šåŠ¨äº‹ä»¶ */
                $(window).bind('scroll', locateCatelogList);
            });
        </script>
    </div>
    
                            

                </div>




            </div>


            <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.css" integrity="sha384-b/NoaeRXkMxyKcrDw2KtVtYKkVg3dA0rTRgLoV7W2df3MzeR1eHLTi+l4//4fMwk" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.js" integrity="sha384-ern5NCRqs6nJ/a4Ik0nB9hnKVH5HwV2XRUYdQl09OB/vvd1Lmmqbg1Mh+mYUclXx" crossorigin="anonymous"></script> | 
  <a class="rss" href="https://dinnerhunt.cn/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>


    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
    
</body>

</html>