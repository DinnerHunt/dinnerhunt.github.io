<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    ã€ŒCodeForces 1241Eã€Paint the Tree | dinnerhunt
</title>
<link rel="shortcut icon" href="https://dinnerhunt.cn/favicon.ico?v=1654671103475">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://dinnerhunt.cn/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://dinnerhunt.cn/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/stackoverflow-light.min.css">

<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


        
</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://dinnerhunt.cn">
                <img class="avatar" src="https://dinnerhunt.cn/images/avatar.png?v=1654671103475" alt="">
            </a>
            <div class="site-title">
                <h1>
                    dinnerhunt
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    é¦–é¡µ
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    å½’æ¡£
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    æ ‡ç­¾
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    å…³äº
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/friend" class="menu">
                                    å‹é“¾
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-detail main-container">
                <!-- left -->
                <div id="content" class="main-container-left">
                    <article class="post i-card">
                        <h2 class="post-title">
                            ã€ŒCodeForces 1241Eã€Paint the Tree
                        </h2>
                        <div class="post-info">
                            <time class="post-time">2019-12-26</time>
                            
                                <a href="https://dinnerhunt.cn/tag/r4hP__gsc/" class="post-tag i-tag
                            i-tag-other_1">
                            #æ ‘å‹DP
                        </a>
                                
                        </div>
                        
                                <div class="post-content">
                                    <p>You are given a weighted tree consisting of ğ‘› vertices. Recall that a tree is a connected graph without cycles. Vertices ğ‘¢ğ‘– and ğ‘£ğ‘– are connected by an edge with weight ğ‘¤ğ‘–.</p>
<!--more-->
<p>Let's define the ğ‘˜-coloring of the tree as an assignment of exactly ğ‘˜ colors to each vertex, so that each color is used no more than two times. You can assume that you have infinitely many colors available. We say that an edge is saturated in the given ğ‘˜-coloring if its endpoints share at least one color (i.e. there exists a color that is assigned to both endpoints).</p>
<p>Let's also define the value of a ğ‘˜-coloring as the sum of weights of saturated edges.</p>
<p>Please calculate the maximum possible value of a ğ‘˜-coloring of the given tree.</p>
<p>You have to answer ğ‘ independent queries.</p>
<h4 id="é“¾æ¥">é“¾æ¥ğŸ”—</h4>
<p><a href="https://codeforces.com/contest/1241/problem/E">ã€ŒCodeForces 1241Eã€Paint the Tree</a></p>
<h4 id="é¢˜è§£">é¢˜è§£</h4>
<p>æ ‘å½¢DPï¼Œå› ä¸ºç›¸é‚»ä¸¤ä¸ªç‚¹æŸ“è‰²æ‰æœ‰è´¡çŒ®ã€‚<br>
èŠ‚ç‚¹æ¯æŸ“ä¸€ç§é¢œè‰²ï¼Œè¡¨ç¤ºé€‰äº†ä¸€æ¡è¾¹ï¼Œä¹Ÿå°±æ„å‘³ç€ä¸€ä¸ªç‚¹ä¸èƒ½é€‰è¶…è¿‡kæ¡ä¸ä¹‹ç›¸é‚»çš„è¾¹<br>
DP[x][1] è¡¨ç¤ºè¯¥ç‚¹è¾¹é€‰æ»¡äº†çš„ä»·å€¼<br>
DP[x][0] è¡¨ç¤ºæœªé€‰æ»¡çš„ä»·å€¼<br>
æˆ‘ä»¬è€ƒè™‘åˆ°xæ—¶ï¼Œå­æ ‘éƒ½é€‰å¥½äº†ï¼Œå…ˆä¸é€‰ä¸è‡ªèº«é“¾æ¥çš„è¾¹ï¼Œä¹Ÿå°±æ˜¯åŠ ä¸Šæ‰€æœ‰DP[v][1]ï¼ˆvä¸ºå­æ ‘èŠ‚ç‚¹)<br>
ç„¶åæˆ‘ä»¬ä¾æ¬¡è€ƒè™‘ï¼ŒDP[v][0]+E{x,v}è¿™æ¡è¾¹çš„æƒå€¼(ä¹Ÿå°±æ˜¯æ˜¯å¦ä¸è¯¥ç‚¹è¿è¾¹),å¦‚æœé€‰è¯¥è¾¹ï¼Œåˆ™è¦å‡å»DP[v][1]ï¼Œåˆ™ä¸è¯¥ç‚¹è¿è¾¹çš„è´¡çŒ®ä¸º(DP[v][0]+E{x,v}-DP[v][1])</p>
<p>ç„¶åè´ªå¿ƒé€‰å‰kä¸ªå°±å¥½</p>
<h4 id="ä»£ç ">ä»£ç </h4>
<pre><code class="language-cpp">const int maxd = 5e5+10;
typedef long long ll;

vector&lt;P&gt; G[maxd];
vector&lt;ll&gt; a;
ll n,k,dp[maxd][2];
// dp[i][0] è¡¨ç¤ºé€‰æ»¡kè¾¹çš„æœ€å¤§ä»·å€¼
void dfs(ll x,ll fa)
{
//    PLL(x);
//    PN();
    dp[x][0] = dp[x][1] = 0;
    for(auto p:G[x])
    {
        ll v = p.st;
        if(v == fa) continue;
        dfs(v,x);
        dp[x][0] += dp[v][1];
        dp[x][1] += dp[v][1]; //å…ˆé€‰æ»¡çš„å­æ ‘
    }
    //é€‰æ»¡çš„å­æ ‘ï¼Œè¿™æ ·å½“å‰èŠ‚ç‚¹å°±æ— æ³•ä¸å­æ ‘èŠ‚ç‚¹è¿è¾¹ï¼Œå› ä¸ºå­æ ‘ç‚¹å·²ç»æ»¡Kä¸ªäº†

    a.clear();
    for(auto p:G[x])
    {
        ll v = p.st;
        if(v == fa) continue;
        a.pb(-(dp[v][0]+ p.nd - dp[v][1]));
        //è¿™é‡Œæˆ‘ä»¬æšä¸¾æ¯ä¸ªèŠ‚ç‚¹çš„å·®å€¼ï¼Œä¹Ÿå°±æ˜¯å¦‚æœå­æ ‘ä¸é€‰æ»¡ï¼Œåˆ™å¯é€‰è¿™æ¡è¾¹
    }
    sort(all(a)); //è´ªå¿ƒé€‰æ‹©ä»·æ ¼é«˜çš„

    ll len = min((ll)a.size(),k);
    F(len)
    {
        ll v = -a[i];
        if(v &lt; 0)break;
        if(i&lt;k-1) dp[x][0] += v;
        dp[x][1] += v;
    }
}

int main()
{
//    freopen(&quot;a.in&quot;,&quot;r&quot;,stdin);
//    freopen(&quot;k.out&quot;,&quot;w&quot;,stdout);
    int t;scanf(&quot;%d&quot;,&amp;t);
    while(t--)
    {
        RLL(n);RLL(k);
        F(n-1)
        {
            ll a,b,c;
            RLL(a);RLL(b);RLL(c);
            //printf(&quot;%lld %lld %lld\n&quot;,a,b,c);
            G[a].pb(P(b,c));
            G[b].pb(P(a,c));
        }
//        FOR(1,n)
//        {
//            for(auto p: G[i]) printf(&quot;%lld &quot;,p.st);
//            PN();
//        }
        dfs(1ll,-1ll);
        FOR(1,n) G[i].clear();
        PLL(max(dp[1][0],dp[1][1]));
        PN();

    }

    return 0;
}

</code></pre>

                                </div>
                    </article>
                    <!--  -->
                    
                            <div id="disqus_thread"></div>
                            <div id="gitalk-container"></div>
                </div>
                <!-- middle -->
                <div class="main-container-middle"></div>
                <!-- right -->
                <div id="sidebar" class="main-container-right">
                    
                        <!-- toc -->
                        
    <div class="toc-card i-card ">
        <div class="toc-title i-card-title">ç›®å½•</div>
        <div class="toc-content">
            <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#%E9%93%BE%E6%8E%A5">é“¾æ¥ğŸ”—</a></li>
<li><a href="#%E9%A2%98%E8%A7%A3">é¢˜è§£</a></li>
<li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
        <script>
            function locateCatelogList() {
                /*è·å–æ–‡ç« ç›®å½•é›†åˆ,å¯é€šè¿‡:headerè¿‡æ»¤å™¨*/
                var alis = $('.post-content :header');
                /*è·å–ä¾§è¾¹æ ç›®å½•åˆ—è¡¨é›†åˆ**/
                var sidebar_alis = $('.markdownIt-TOC a');
                /*è·å–æ»šåŠ¨æ¡åˆ°é¡¶éƒ¨çš„è·ç¦»*/
                var scroll_height = $(window).scrollTop();
                for (var i = 0; i < alis.length; i++) {
                    /*è·å–é”šç‚¹é›†åˆä¸­çš„å…ƒç´ åˆ†åˆ«åˆ°é¡¶ç‚¹çš„è·ç¦»*/
                    var a_height = $(alis[i]).offset().top;
                    if (a_height < scroll_height) {
                        /*é«˜äº®æ˜¾ç¤º*/
                        sidebar_alis.removeClass('on');
                        $(sidebar_alis[i]).addClass('on');
                    }
                }
            }
            $(function() {
                /*ç»‘å®šæ»šåŠ¨äº‹ä»¶ */
                $(window).bind('scroll', locateCatelogList);
            });
        </script>
    </div>
    
                            

                </div>




            </div>


            <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.css" integrity="sha384-b/NoaeRXkMxyKcrDw2KtVtYKkVg3dA0rTRgLoV7W2df3MzeR1eHLTi+l4//4fMwk" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.js" integrity="sha384-ern5NCRqs6nJ/a4Ik0nB9hnKVH5HwV2XRUYdQl09OB/vvd1Lmmqbg1Mh+mYUclXx" crossorigin="anonymous"></script> | 
  <a class="rss" href="https://dinnerhunt.cn/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>


    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
    
</body>

</html>