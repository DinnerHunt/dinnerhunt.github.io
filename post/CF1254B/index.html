<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    ã€ŒCodeForces 1254Bã€Send Boxes to Alice | dinnerhunt
</title>
<link rel="shortcut icon" href="https://dinnerhunt.cn/favicon.ico?v=1654671103475">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://dinnerhunt.cn/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="https://dinnerhunt.cn/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/stackoverflow-light.min.css">

<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


        
</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="https://dinnerhunt.cn">
                <img class="avatar" src="https://dinnerhunt.cn/images/avatar.png?v=1654671103475" alt="">
            </a>
            <div class="site-title">
                <h1>
                    dinnerhunt
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="/" class="menu">
                                    é¦–é¡µ
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/archives" class="menu">
                                    å½’æ¡£
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/tags" class="menu">
                                    æ ‡ç­¾
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/about" class="menu">
                                    å…³äº
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="/post/friend" class="menu">
                                    å‹é“¾
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-detail main-container">
                <!-- left -->
                <div id="content" class="main-container-left">
                    <article class="post i-card">
                        <h2 class="post-title">
                            ã€ŒCodeForces 1254Bã€Send Boxes to Alice
                        </h2>
                        <div class="post-info">
                            <time class="post-time">2019-12-19</time>
                            
                                <a href="https://dinnerhunt.cn/tag/UvxBOp35o/" class="post-tag i-tag
                            i-tag-other_3">
                            #è´ªå¿ƒ
                        </a>
                                
                                <a href="https://dinnerhunt.cn/tag/XSv1yVoEc/" class="post-tag i-tag
                            i-tag-error">
                            #æ•°è®º
                        </a>
                                
                        </div>
                        
                                <div class="post-content">
                                    <p>This is the harder version of the problem. In this version, 1â‰¤ğ‘›â‰¤106 and 0â‰¤ğ‘ğ‘–â‰¤106. You can hack this problem if you locked it. But you can hack the previous problem only if you locked both problems</p>
<p>Christmas is coming, and our protagonist, Bob, is preparing a spectacular present for his long-time best friend Alice. This year, he decides to prepare ğ‘› boxes of chocolate, numbered from 1 to ğ‘›. Initially, the ğ‘–-th box contains ğ‘ğ‘– chocolate pieces.</p>
<!--more-->
<p>Since Bob is a typical nice guy, he will not send Alice ğ‘› empty boxes. In other words, at least one of ğ‘1,ğ‘2,â€¦,ğ‘ğ‘› is positive. Since Alice dislikes coprime sets, she will be happy only if there exists some integer ğ‘˜&gt;1 such that the number of pieces in each box is divisible by ğ‘˜. Note that Alice won't mind if there exists some empty boxes.</p>
<p>Charlie, Alice's boyfriend, also is Bob's second best friend, so he decides to help Bob by rearranging the chocolate pieces. In one second, Charlie can pick up a piece in box ğ‘– and put it into either box ğ‘–âˆ’1 or box ğ‘–+1 (if such boxes exist). Of course, he wants to help his friend as quickly as possible. Therefore, he asks you to calculate the minimum number of seconds he would need to make Alice happy.</p>
<h4 id="é“¾æ¥">é“¾æ¥ğŸ”—</h4>
<p><a href="https://codeforces.com/contest/1254/problem/B2">ã€ŒCodeForces 1254Bã€Send Boxes to Alice</a></p>
<h4 id="é¢˜è§£">é¢˜è§£</h4>
<p>å †æ•°è‚¯å®šæ˜¯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>u</mi><mi>m</mi></mrow><annotation encoding="application/x-tex">sum</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">u</span><span class="mord mathdefault">m</span></span></span></span>çš„å› æ•°ï¼Œå¦‚æœ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mi mathvariant="normal">âˆ£</mi><mi>s</mi><mi>u</mi><mi>m</mi><mo separator="true">,</mo><mi>b</mi><mi mathvariant="normal">âˆ£</mi><mi>s</mi><mi>u</mi><mi>m</mi><mo separator="true">,</mo><mi>a</mi><mi mathvariant="normal">âˆ£</mi><mi>b</mi></mrow><annotation encoding="application/x-tex">a|sum  , b |sum , a | b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">a</span><span class="mord">âˆ£</span><span class="mord mathdefault">s</span><span class="mord mathdefault">u</span><span class="mord mathdefault">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">b</span><span class="mord">âˆ£</span><span class="mord mathdefault">s</span><span class="mord mathdefault">u</span><span class="mord mathdefault">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">a</span><span class="mord">âˆ£</span><span class="mord mathdefault">b</span></span></span></span>ï¼Œé‚£ä¹ˆè‚¯å®šé€‰<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">a</span></span></span></span>å †æ•°<br>
ç„¶åæš<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>ï¼Œå› ä¸ºåªæœ‰å¯èƒ½å°†è¯¥å †æ•°å¾€åç§»ï¼Œæˆ–è€…å°†åé¢çš„å †æ•°å¾€å‰ç§»è¿™ä¸¤ç§å¯èƒ½ï¼Œæ‰€ä»¥è´ªå¿ƒä¸€ä¸‹å°±å¥½</p>
<h4 id="ä»£ç ">ä»£ç </h4>
<pre><code class="language-cpp">#include &lt;cstdio&gt;
#include &lt;cstring&gt;
#include &lt;algorithm&gt;
#include &lt;vector&gt;
using namespace std;
const int maxd = 1e6+10;
int a[maxd];
long long sum,ans = 1e18;
vector&lt;long long&gt; b;
int main()
{
//    freopen(&quot;a.in&quot;,&quot;r&quot;,stdin);
//    freopen(&quot;k.out&quot;,&quot;w&quot;,stdout);
    int n;scanf(&quot;%d&quot;,&amp;n);
    for(int i=1;i&lt;=n;i++) scanf(&quot;%d&quot;,&amp;a[i]);
    for(int i=1;i&lt;=n;i++) sum+=a[i];
    if(sum == 1) {printf(&quot;-1\n&quot;);return 0;}
    for(long long i=2;i*i&lt;=sum;i++)
    {
        if(sum%i==0)
        {
            b.push_back(i);
            sum /= i;
            i--;
        }
    }
    b.push_back(sum);
    for(auto x : b)
    {
        //printf(&quot;%d\n&quot;,x);
        long long res = 0; sum = 0; // sum è¡¨ç¤ºå½“å‰è¿˜æœªåŒ¹é…åˆ°çš„æ•°é‡
        for(int i=1;i&lt;=n;i++)
        {
            sum += a[i];
            sum %= x;
            res += min(sum,x - sum);
            // å¯ä»¥é€‰æ‹©å°†å½“å‰å‰©ä¸‹çš„å¸¦åˆ°åé¢ä¸€æ ¼ï¼Œæˆ–è€…å°†è¿˜ç¼ºå¤šå°‘çš„éƒ¨åˆ†ä»åé¢å¸¦å›æ¥ï¼Œå› ä¸ºæ€»æ•°æ˜¯ä¸€å®šå¤Ÿé™¤ä»¥xçš„
        }
        ans = min(res,ans);
    }
    printf(&quot;%lld\n&quot;,ans);
    return 0;
}
</code></pre>

                                </div>
                    </article>
                    <!--  -->
                    
                            <div id="disqus_thread"></div>
                            <div id="gitalk-container"></div>
                </div>
                <!-- middle -->
                <div class="main-container-middle"></div>
                <!-- right -->
                <div id="sidebar" class="main-container-right">
                    
                        <!-- toc -->
                        
    <div class="toc-card i-card ">
        <div class="toc-title i-card-title">ç›®å½•</div>
        <div class="toc-content">
            <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#%E9%93%BE%E6%8E%A5">é“¾æ¥ğŸ”—</a></li>
<li><a href="#%E9%A2%98%E8%A7%A3">é¢˜è§£</a></li>
<li><a href="#%E4%BB%A3%E7%A0%81">ä»£ç </a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
        <script>
            function locateCatelogList() {
                /*è·å–æ–‡ç« ç›®å½•é›†åˆ,å¯é€šè¿‡:headerè¿‡æ»¤å™¨*/
                var alis = $('.post-content :header');
                /*è·å–ä¾§è¾¹æ ç›®å½•åˆ—è¡¨é›†åˆ**/
                var sidebar_alis = $('.markdownIt-TOC a');
                /*è·å–æ»šåŠ¨æ¡åˆ°é¡¶éƒ¨çš„è·ç¦»*/
                var scroll_height = $(window).scrollTop();
                for (var i = 0; i < alis.length; i++) {
                    /*è·å–é”šç‚¹é›†åˆä¸­çš„å…ƒç´ åˆ†åˆ«åˆ°é¡¶ç‚¹çš„è·ç¦»*/
                    var a_height = $(alis[i]).offset().top;
                    if (a_height < scroll_height) {
                        /*é«˜äº®æ˜¾ç¤º*/
                        sidebar_alis.removeClass('on');
                        $(sidebar_alis[i]).addClass('on');
                    }
                }
            }
            $(function() {
                /*ç»‘å®šæ»šåŠ¨äº‹ä»¶ */
                $(window).bind('scroll', locateCatelogList);
            });
        </script>
    </div>
    
                            

                </div>




            </div>


            <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.css" integrity="sha384-b/NoaeRXkMxyKcrDw2KtVtYKkVg3dA0rTRgLoV7W2df3MzeR1eHLTi+l4//4fMwk" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.js" integrity="sha384-ern5NCRqs6nJ/a4Ik0nB9hnKVH5HwV2XRUYdQl09OB/vvd1Lmmqbg1Mh+mYUclXx" crossorigin="anonymous"></script> | 
  <a class="rss" href="https://dinnerhunt.cn/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>


    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
    
</body>

</html>